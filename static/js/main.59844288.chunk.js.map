{"version":3,"sources":["components/applications/application.jsx","global.js","App.js","serviceWorker.js","index.js"],"names":["Applications","state","error","isLoaded","userDecisions","allApplications","remainingApps","comments","flag","numYeses","reviewerName","votingStarted","votingComplete","entry","Array","from","join","array","sort","Math","random","fetch","global","DECISIONS_URL","headers","Authorization","AIRTABLE_KEY","then","res","json","result","setState","records","APPLICATIONS_URL","shuffle","NUM_YES","filter","r","fields","length","map","includes","id","this","applicantName","vote","body","method","console","text","log","toaster","notify","className","duration","position","airtableStateHandler","document","getElementById","scrollTop","k","fieldResponse","formatFieldResponse","IGNORED_FIELDS","key","QUESTION_ORDER","slice","i","Object","keys","orderFields","renderAppLine","event","target","value","flagState","checked","Error","userName","prompt","OFFICERS","keyAttempt","SEM_SECRET","disabled","app","err","onClick","voteOnRemainingApps","authUserWeak","message","info","initPage","resource","voteRemainingButton","renderVoteRemainingButton","name","type","htmlFor","current","currentApp","renderApp","onChange","handleCommentsChange","bind","handleFlagChange","airtableVoteHandler","window","scrollTo","Component","App","Boolean","location","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.59844288.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport toaster from 'toasted-notes'; // requires react-spring module! yarn add toasted-notes; npm install react-spring;\r\nimport \"./application.css\";\r\nimport \"../../global.js\";\r\n\r\nclass Applications extends Component {\r\n  /**\r\n   * Creates an instance of the Applications page.\r\n   * @constructor\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      error: null,\r\n      isLoaded: false,\r\n      userDecisions: [],\r\n      allApplications: [],\r\n      remainingApps: [],\r\n      comments: '',\r\n      flag: \"No\",\r\n      numYeses: null,\r\n      reviewerName: null,\r\n      votingStarted: false,\r\n      votingComplete: false,\r\n    }\r\n  }\r\n  \r\n  /** \r\n   * Formats field responses\r\n   * for multiple select questions like \"Which programming languages do you know?\", converts Object [a,b,c] to \"a, b, c\"\r\n   * @param {Object} entry: field response to be formatted (can be string or Object[])\r\n  */\r\n  formatFieldResponse(entry) {\r\n    return (typeof(entry) !== \"string\") ? Array.from(entry).join(\", \") : entry;\r\n  }\r\n\r\n  /** \r\n   * Destructively shuffles an input array. \r\n   * @returns shuffled array\r\n  */\r\n  shuffle(array) {\r\n    array.sort(() => Math.random() - .5);\r\n    return array;\r\n  }\r\n\r\n  /** \r\n   * Updates state variables to reflect current Airtable state, \r\n   * To find all applications a reviewer has yet to vote on:\r\n   * (1) GET from Decision Table, filter by Reviewer Name\r\n   * (2) GET from All Applications Table\r\n   * from (2) remove all records with matching IDs in (1)\r\n   * @param {string} reviewerName: name of reviewer\r\n    */\r\n  airtableStateHandler(reviewerName) {\r\n    const formula = \"?filterByFormula=%7BReviewer%20Name%7D%20%3D%20%20%22\"\r\n    fetch(global.DECISIONS_URL + formula + reviewerName + \"%22&view=Grid%20view\", {\r\n        headers: {\r\n          Authorization: \"Bearer \" + global.AIRTABLE_KEY\r\n        }\r\n      })\r\n        .then(res => res.json())\r\n        .then((result) => {\r\n          this.setState({\r\n            userDecisions: result.records,\r\n          });\r\n        }, (error) => {\r\n          this.setState({\r\n            error,\r\n          });\r\n        });\r\n    \r\n    fetch(global.APPLICATIONS_URL + \"?view=Grid%20view\", {\r\n      headers: {\r\n        Authorization: \"Bearer \" + global.AIRTABLE_KEY\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(\r\n        (result) => {\r\n          this.setState((state) => { return {\r\n            allApplications: this.shuffle(result.records),\r\n            numYeses: global.NUM_YES - state.userDecisions.filter(r => r.fields['Interview'] === \"Yes\").length,\r\n            remainingApps: result.records.filter(r => !(state.userDecisions.map(r => r.fields['ID'])).includes(r.id)),\r\n            isLoaded: true,\r\n          }});\r\n        },\r\n        (error) => {\r\n          this.setState({\r\n            isLoaded: true,\r\n            error,\r\n          });\r\n        }\r\n      );\r\n      \r\n      this.setState({\r\n        comments: '',\r\n        flag: \"No\",\r\n      });\r\n\r\n      if (this.state.error) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n  }\r\n\r\n  /** \r\n   * Asynchronously submits a vote via POST and calls airtableStateHandler. \r\n   * @param {string} applicantName: applicant name\r\n   * @param {string} reviewerName: name of reviewer\r\n   * @param {string} vote: \"Yes\" or \"No\" (interview decision)\r\n   * @param {string} flag: \"Yes\" or \"No\" (mark as flagged)\r\n   * @param {string} comments: comments for this application\r\n   * @param {string} id: application ID from the All Applications Table\r\n  */\r\n  async airtableVoteHandler(applicantName, reviewerName, vote, flag, comments, id) {\r\n    try {\r\n      const r = await fetch(global.DECISIONS_URL, {\r\n        body: \"{\\\"records\\\": [{\\\"fields\\\": {\\\"Applicant Name\\\": \\\"\"+applicantName+\"\\\",\\\"Reviewer Name\\\": \\\"\"+reviewerName+\"\\\",\\\"Interview\\\": \\\"\"+vote+\"\\\",\\\"Flag\\\": \\\"\"+flag+\"\\\",\\\"Comments\\\": \\\"\"+comments+\"\\\", \\\"ID\\\": \\\"\"+id+\"\\\"}}]}\",\r\n        headers: {\r\n          Authorization: \"Bearer \" + global.AIRTABLE_KEY,\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        method: \"POST\"\r\n      });\r\n      console.log(await r.text());\r\n\r\n      toaster.notify(<div className=\"toast\"><h4 className=\"toast-text\">Voted {vote} for {applicantName}!</h4></div>, {\r\n        duration: 1000,\r\n        position: 'bottom'\r\n      })\r\n\r\n      this.airtableStateHandler(reviewerName);\r\n      document.getElementById('app-view').scrollTop = 0;\r\n      console.log(this.state)\r\n    }\r\n    catch (err) {\r\n      console.log(\"fetch failed [VOTE]\", err);\r\n    }\r\n  }\r\n\r\n  /** \r\n   * Displays each question and response as a new paragraph line. \r\n   * @param {Object} fields: question : response dict\r\n   * @param {string} k: key in fields dict, usually the app question\r\n   * @returns paragraph response from the app (CSS app-line)\r\n  */\r\n  renderAppLine(fields, k) {\r\n    const fieldResponse = this.formatFieldResponse(fields[k]);\r\n    if (!global.IGNORED_FIELDS.includes(k)) { // certain fields removed to eliminate app reader bias\r\n      return (\r\n        <div className=\"app-question\" key={k}>\r\n          <p className=\"app-field\"><b>{k}</b></p>\r\n          <p className=\"app-response\">{fieldResponse}</p>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  /** \r\n   * OPTIONAL: Orders questions based on global.QUESTION_ORDER \r\n   * @param {Object} fields: question : response dict\r\n  */\r\n  orderFields(fields) {\r\n    return global.QUESTION_ORDER ? global.QUESTION_ORDER.slice().map(i => Object.keys(fields)[i]) : Object.keys(fields);\r\n  }\r\n\r\n  /**\r\n   * Displays the application\r\n   * @param {dictionary} fields \r\n   */\r\n  renderApp(fields) {\r\n    const orderedFields = this.orderFields(fields);\r\n    return orderedFields.map((k) => this.renderAppLine(fields, k));\r\n  }\r\n\r\n  /** \r\n   * Handles the event where the user comments something\r\n   * @param {event} event: change event\r\n  */\r\n  handleCommentsChange(event) {\r\n    this.setState({\r\n      comments: event.target.value,\r\n    });\r\n  }\r\n\r\n  /** \r\n   * Handles the event where the user checks the flag check box to flag an app\r\n   * @param {event} event: change event \r\n  */\r\n  handleFlagChange(event) {\r\n    const flagState = event.target.checked ? \"Yes\" : \"No\";\r\n    console.log(flagState)\r\n    this.setState({\r\n      flag: flagState,\r\n    });\r\n  }\r\n\r\n  /** \r\n   * Prompts user to enter their name. \r\n   * If the name is valid, allow the user to proceed & populate reviewerName state\r\n   * If invalid, populate error state. \r\n   * Gets called on Mount and on refresh.\r\n   */\r\n  authUserWeak() {\r\n    const error = Error(\"Invalid Credentials!\");\r\n    if (!this.state.reviewerName) {\r\n      // popup input\r\n      var userName = prompt(\"Please enter your name: \", \"First Last\");\r\n      if (userName === null || userName === \"\" || !global.OFFICERS.includes(userName)) { // TODO: fix this weak-ass auth approach\r\n        this.setState({error: error});\r\n      } else {\r\n        var keyAttempt = prompt(\"Secret key: \", \"Given to you by executives\");\r\n        if (keyAttempt === null || keyAttempt === \"\" || !global.SEM_SECRET===keyAttempt) { // TODO: fix this weak-ass auth approach\r\n          this.setState({error: error});\r\n        } else {\r\n          this.setState({reviewerName: userName});\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Votes \"No\" on the remaining apps once the user is out of yeses */\r\n  async voteOnRemainingApps() {\r\n    document.getElementById(\"leftover-no-button\").disabled=true;\r\n    if (this.state.numYeses === 0) {\r\n      console.log(\"Voting 'No' on remaining apps!\")\r\n      // mark remaining apps as \"No\"\r\n      const records = this.state.remainingApps.map(\r\n        (app) => {\r\n          let applicantName = app.fields['Name'];\r\n          let reviewerName = this.state.reviewerName;\r\n          let vote = \"No\";\r\n          let flag = \"No\";\r\n          let comments = \"\";\r\n          let id = app.id;\r\n          return \"{\\\"fields\\\": {\\\"Applicant Name\\\": \\\"\"+applicantName+\"\\\",\\\"Reviewer Name\\\": \\\"\"+reviewerName+\"\\\",\\\"Interview\\\": \\\"\"+vote+\"\\\",\\\"Flag\\\": \\\"\"+flag+\"\\\",\\\"Comments\\\": \\\"\"+comments+\"\\\", \\\"ID\\\": \\\"\"+id+\"\\\"}}\"\r\n        }\r\n      );\r\n\r\n      try {\r\n        records.map((r) =>\r\n          fetch(global.DECISIONS_URL, {\r\n            body: \"{\\\"records\\\": [\"+ r +\"]}\",\r\n            headers: {\r\n              Authorization: \"Bearer \" + global.AIRTABLE_KEY,\r\n              \"Content-Type\": \"application/json\"\r\n            },\r\n            method: \"POST\"\r\n          }));\r\n      }\r\n      catch (err) {\r\n        console.log(\"fetch failed [VOTE]\", err);\r\n      }\r\n    }\r\n    this.setState({votingComplete: true}, () => {\r\n      console.log(this.state.votingComplete, \"votingComplete\"); \r\n      toaster.notify(<div className=\"done-toast\"><h4 className=\"toast-text\">All done! Great work!</h4></div>, {\r\n        position: 'bottom',\r\n        duration: null,\r\n      });\r\n    });\r\n  }\r\n\r\n  /** Renders the voteutton if remaining apps exist */\r\n  renderVoteRemainingButton() {\r\n    if (this.state.remainingApps.length > 0) {\r\n      return (\r\n        <div>\r\n          <button className=\"leftover-no-button\" id=\"leftover-no-button\" onClick={() => {this.voteOnRemainingApps(); this.airtableStateHandler(this.state.reviewerName);}}>\r\n            Vote \"No\" on Remaining {this.state.remainingApps.length} Apps\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  /** Refreshes page on start to retrieve updated state */\r\n  initPage() {\r\n    console.log(this.state.votingStarted, \"status in startVoting\");\r\n    this.setState({votingStarted: true,});\r\n    this.airtableStateHandler(this.state.reviewerName);\r\n  }\r\n\r\n  /** Sets up app reader component */\r\n  componentDidMount() {\r\n    this.authUserWeak();\r\n    this.airtableStateHandler(this.state.reviewerName);\r\n  }\r\n\r\n  render() {\r\n    const error = this.state.error;\r\n    const isLoaded = this.state.isLoaded;\r\n    if (error) {\r\n      return <div>Error: {error.message}</div>\r\n    }\r\n    if (!isLoaded) {\r\n      return <div>Loading...</div>\r\n    }\r\n\r\n    if (!this.state.votingStarted) {\r\n      console.info('Initializing');\r\n      this.initPage();\r\n    }\r\n\r\n    if (this.state.remainingApps.length === 0 || this.state.numYeses === 0) {\r\n      const resource = !this.state.remainingApps.length ? \"apps\" : \"yeses\"\r\n      const voteRemainingButton = this.renderVoteRemainingButton();\r\n\r\n      if (!this.state.votingComplete) {\r\n        toaster.notify(<div className=\"toast\"><h4 className=\"toast-text\">No {resource} remaining!</h4></div>, {\r\n          position: 'bottom',\r\n          duration: null,\r\n        }); // TODO: fix! appears twice for some reason\r\n      }\r\n      return (\r\n        <div>\r\n          <div className=\"container\">\r\n            <div className=\"header\">\r\n              <div className=\"header-application\">Application</div>\r\n              <div className=\"header-stats\">Apps Remaining: {this.state.remainingApps.length}</div>\r\n              <div className=\"header-stats\">Yeses Remaining: {this.state.numYeses}</div>\r\n            </div>\r\n\r\n            <div className=\"app-section\">\r\n              <div className=\"app-view\" id=\"app-view\"></div>\r\n              <div className=\"app-options\">\r\n                <h3 className=\"reviewer-label\">Reviewer:</h3>\r\n                <p className=\"reviewer-name\">{this.state.reviewerName}</p>\r\n                <h4 className=\"comments-label\">Comment:</h4>\r\n                <textarea id=\"comments-textbox\" className=\"comments-textbox\" name=\"app\" value={this.state.comments} disabled={true}></textarea>\r\n                <div className=\"flag\">\r\n                  <input id=\"flag-checkbox\" className=\"flag-checkbox\" type=\"checkbox\" checked={this.state.flag===\"Yes\"} disabled={true}></input>\r\n                  <label htmlFor=\"flag-checkbox\">Flag</label>\r\n                </div>\r\n                <div className=\"vote\">\r\n                  <h3 className=\"vote-label\">Vote</h3>\r\n                  <button className=\"no-button\" disabled={true}>\r\n                    No\r\n                  </button>\r\n                  <button className=\"skip-button\" disabled={true}>\r\n                    Skip\r\n                  </button>\r\n                  <button className=\"yes-button\" disabled={true}>\r\n                    Yes\r\n                  </button>\r\n                </div>\r\n                {voteRemainingButton}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    const current = this.state.remainingApps[0];\r\n    const fields = current.fields;\r\n    const id = current.id;\r\n    const applicantName = fields[\"Name\"];\r\n    const reviewerName = this.state.reviewerName;\r\n    const currentApp = this.renderApp(fields);\r\n    return (\r\n      <div>\r\n        <div className=\"container\">\r\n          <div className=\"header\">\r\n            <div className=\"header-application\">Application</div>\r\n            <div className=\"header-stats\">Apps Remaining: {this.state.remainingApps.length}</div>\r\n            <div className=\"header-stats\">Yeses Remaining: {this.state.numYeses}</div>\r\n          </div>\r\n\r\n          <div className=\"app-section\">\r\n            <div className=\"app-view\" id=\"app-view\">{currentApp}</div>\r\n            <div className=\"app-options\">\r\n              <h3 className=\"reviewer-label\">Reviewer:</h3>\r\n              <p className=\"reviewer-name\">{this.state.reviewerName}</p>\r\n              <h4 className=\"comments-label\">Comment:</h4>\r\n              <textarea id=\"comments-textbox\" className=\"comments-textbox\" name=\"app\" value={this.state.comments} onChange={this.handleCommentsChange.bind(this)}></textarea>\r\n              <div className=\"flag\">\r\n                <input id=\"flag-checkbox\" className=\"flag-checkbox\" type=\"checkbox\" checked={this.state.flag===\"Yes\"} onChange={this.handleFlagChange.bind(this)}></input>\r\n                <label htmlFor=\"flag-checkbox\">Flag</label>\r\n              </div>\r\n              <div className=\"vote\">\r\n                <h3 className=\"vote-label\">Vote</h3>\r\n                <button className=\"no-button\" disabled={this.state.numYeses <= 0} onClick={() => {\r\n                  this.airtableVoteHandler(applicantName, reviewerName, \"No\", this.state.flag, this.state.comments, id); window.scrollTo(0,0);}}>\r\n                  No\r\n                </button>\r\n                <button className=\"skip-button\" onClick={() => {\r\n                  this.airtableStateHandler(reviewerName); document.getElementById('app-view').scrollTop = 0;}}>\r\n                  Skip\r\n                </button>\r\n                <button className=\"yes-button\" disabled={this.state.numYeses <= 0} onClick={() => {\r\n                  this.airtableVoteHandler(applicantName, reviewerName, \"Yes\", this.state.flag, this.state.comments, id); window.scrollTo(0,0);}}>\r\n                  Yes\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Applications;\r\n","// For global variables.\r\n// The global scope in React Native is variable global.\r\n// For ex: as global.foo = foo, then you can use global.foo anywhere as a global variable.\r\n// Make sure you import './global.js' in your files to use global variables!\r\nglobal.AIRTABLE_KEY = \"keyd6qkfF0Q6csT9G\"; \r\nglobal.APPLICATIONS_URL = \"https://api.airtable.com/v0/appm1EwjHL56mOmPx/All%20Applications\"; // Applications airtable link\r\nglobal.DECISIONS_URL = \"https://api.airtable.com/v0/appm1EwjHL56mOmPx/Decisions\"; // Decisions airtable link\r\nglobal.OFFICERS = [\r\n    \"Aditya Varshney\",\r\n    \"Anna Gao\",\r\n    \"Sai Yandapalli\",\r\n    \"Hau Nguyen\",\r\n    \"Andrew Lieu\"\r\n];\r\nglobal.SEM_SECRET = \"993342\"\r\nglobal.NUM_YES = 30;\r\nglobal.IGNORED_FIELDS = [\r\n    \"Name\",\r\n    \"Email\",\r\n    \"Year\",\r\n    \"Phone Number\",\r\n];\r\n/** Custom ordering of questions */\r\nglobal.QUESTION_ORDER = [\r\n    6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,0,1,2,3,4,5,\r\n]","import React from \"react\";\r\nimport Application from \"./components/applications/application\";\r\nimport \"./App.css\";\r\n\r\nfunction App() {\r\n  return <Application></Application>;\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}